name: setup
version: "1.0"
description: "Platform setup wizard - orchestrates service installation"

# Service selection - which services to enable
service_selection:
  - id: select_openmetadata
    type: boolean
    prompt: "Install OpenMetadata?"
    state_key: services.openmetadata.enabled
    default_value: false
    next: select_kerberos

  - id: select_kerberos
    type: boolean
    prompt: "Install Kerberos?"
    state_key: services.kerberos.enabled
    default_value: false
    next: select_pagila

  - id: select_pagila
    type: boolean
    prompt: "Install Pagila?"
    state_key: services.pagila.enabled
    default_value: false
    next: null

# Services to orchestrate (base_platform always enabled)
targets:
  - service: base_platform
    enabled: true
    depends_on: []

  - service: openmetadata
    enabled: false
    depends_on:
      - base_platform

  - service: kerberos
    enabled: false
    depends_on: []

  - service: pagila
    enabled: false
    depends_on:
      - base_platform

# Execution policy
policy:
  ordering: topological
  on_failure: abort
