service: base_platform
version: "1.0"
description: "Test container configuration for PostgreSQL and SQL Server connectivity testing"

steps:
  - id: postgres_test_prebuilt
    type: boolean
    state_key: services.base_platform.test_containers.postgres_test.use_prebuilt
    prompt: "Will you use a prebuilt postgres-test image with packages already installed?"
    default_value: false
    next: postgres_test_image

  - id: postgres_test_image
    type: string
    state_key: services.base_platform.test_containers.postgres_test.image
    prompt: "Enter Docker image for postgres-test (e.g., alpine:latest or mycompany/postgres-test:latest for prebuilt):"
    default_value: "alpine:latest"
    validator: base_platform.validate_image_url
    next: sqlcmd_test_prebuilt

  - id: sqlcmd_test_prebuilt
    type: boolean
    state_key: services.base_platform.test_containers.sqlcmd_test.use_prebuilt
    prompt: "Will you use a prebuilt sqlcmd-test image with packages already installed?"
    default_value: false
    next: sqlcmd_test_image

  - id: sqlcmd_test_image
    type: string
    state_key: services.base_platform.test_containers.sqlcmd_test.image
    prompt: "Enter Docker image for sqlcmd-test (e.g., alpine:latest or mycompany/sqlcmd-test:latest for prebuilt):"
    default_value: "alpine:latest"
    validator: base_platform.validate_image_url
    next: save_test_config

  - id: save_test_config
    type: action
    action: base_platform.save_test_container_config
    next: finish
