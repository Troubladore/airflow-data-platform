service: pagila
version: 1.0
description: "Teardown Pagila sample database and cleanup"

steps:
  - id: pagila_teardown_confirm
    type: boolean
    prompt: "Tear down Pagila sample database?"
    state_key: services.pagila.teardown.confirm
    default_value: false
    next:
      when_value:
        true: pagila_remove_repo
        false: finish

  - id: pagila_remove_repo
    type: boolean
    prompt: "Remove Pagila cloned repository folder?"
    state_key: services.pagila.teardown.remove_repo
    default_value: false
    next:
      when_value:
        true: remove_repo_action
        false: drop_database

  - id: remove_repo_action
    type: action
    action: pagila.remove_repo
    next: drop_database

  - id: drop_database
    type: boolean
    prompt: "Remove Pagila database (data will be lost)?"
    state_key: services.pagila.teardown.drop_database
    default_value: false
    next:
      when_value:
        true: drop_database_action
        false: clean_config

  - id: drop_database_action
    type: action
    action: pagila.drop_database
    next: clean_config

  - id: clean_config
    type: action
    action: pagila.clean_config
    next: finish
